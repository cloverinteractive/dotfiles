# Create this file to load extras before
if [ -f <%= @prefix %>/.bash_profile.before ]; then
  . <%= @prefix %>/.bash_profile.before
fi

export PATH=./bin:$HOME/bin<%= ":/opt/local/libexec/gnubin:/opt/local/bin:/opt/local/sbin" if @has_macports %>:$PATH

current_git_branch() {
  git_exists=`git branch 2>/dev/null | sed -ne'/^\* /s///p'`

  if [[ "$git_exists" != "" ]]; then
    if [[ "$git_exists" == "(no branch)" ]]; then
      git_exists="\e[31m\]$git_exists\e[0m\]"
    fi
    echo "$git_exists "
  fi
  unset git_exists
}

current_git_stash() {
  git_stash=`git stash list 2>/dev/null | /usr/bin/wc -l | sed 's/ *//g'`

  if [[ "$git_stash" != "" && $git_stash > 0 ]]; then
    echo "[$git_stash] "
  fi
  unset git_stash
}

PROMPT_COMMAND='PS1="\[\e[1;31m\]\u\[\e[0m\] \t \[\e[32m\]$(current_git_branch)\[\e[0m\]\[\e[35m\]$(current_git_stash)\[\e[0m\]\[\e[33m\]\w\[\e[0m\] \[\e[1m\]\$\[\e[0m\] "'

<% if @has_macports %>
if [ -f /opt/local/etc/bash_completion ]; then
  . /opt/local/etc/bash_completion
fi

alias mysql=mysql5
alias mysqldump=mysqldump5
alias gvim=mvim
<% end %>
alias ls='ls --color=auto'
alias grep='grep --color=auto'

export EDITOR=vim
<% if @is_darwin %>
export VISUAL=mvim
export GIT_EDITOR='mvim -f'
<% else %>
export VISUAL=gvim
export GIT_EDITOR='gvim -f'
<% end %>

# Create this file toload extras after
if [ -f <%= @prefix %>/.bash_profile.after ]; then
  . <%= @prefix %>/.bash_profile.after
fi

# vim: set filetype=sh
