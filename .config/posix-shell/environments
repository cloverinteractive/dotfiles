FNM_PATH=$(which fnm)
GHCUP_ENV=$HOME/.ghcup/env
NIX_PROFILE_USER=$HOME/.nix-profile/etc/profile.d/nix.sh
NIX_PROFILE_SYSTEM=/nix/var/nix/profiles/default/etc/profile.d/nix.sh
NIX_DAEMON_SYSTEM=/nix/var/nix/profiles/default/etc/profile.d/nix-daemon.sh
NVIM_PATH=$(which nvim)
PYENV_PATH=$(which pyenv)
QT5CT_PATH=$(which qt5ct)
UNAME=$(uname)

if [[ -x $FNM_PATH ]]; then
  eval "$(fnm env --use-on-cd)"
fi

if [[ -x $PYENV_PATH ]]; then
  eval "$(pyenv init -)"
fi

if [[ -f $GHCUP_ENV ]]; then
  source $GHCUP_ENV
fi

if [[ -x $PYENV_PATH ]]; then
  eval "$(pyenv init -)"
  eval "$(pyenv virtualenv-init -)"
fi

if [[ -f $NIX_PROFILE_USER ]]; then
  source $NIX_PROFILE_USER
elif [[ -f $NIX_PROFILE_SYSTEM ]]; then
  source $NIX_DAEMON_SYSTEM
  source $NIX_PROFILE_SYSTEM
fi

if [[ -x QT5CT_PATH ]]; then
  export QT_QPA_PLATFORMTHEME=qt5ct
else
  export QT_STYLE_OVERRIDE=gtk2
fi

export PYTHONIOENCODING=UTF-8

# Set editor
if [[ -x $NVIM_PATH ]]; then
  export EDITOR=$NVIM_PATH
  export VISUAL=$NVIM_PATH
  export GIT_EDITOR="$NVIM_PATH -f"
  export VIMINIT=""
fi

# Set history
export HISTCONTROL=erasedups
export HISTSIZE=10000
export HISTTIMEFORMAT="%D %T "
export HISTIGNORE="&:ls:exit"

# Set pager settings
export LESS="-R -iMSx2 -FX"

# XDG
export XDG_DATA_HOME="$HOME/.local/share"
export XDG_CONFIG_HOME="$HOME/.config"
export XDG_STATE_HOME="$HOME/.local/state"
export XDG_CACHE_HOME="$HOME/.cache"

if [[ "$UNAME" == "Linux" ]]; then
  export XDG_RUNTIME_DIR="/run/user/$UID"
fi

export ACKRC="$XDG_CONFIG_HOME/ack/ackrc"
export PSQLRC="$XDG_CONFIG_HOME/pg/psqlrc"
export XINITRC="$XDG_CONFIG_HOME/X11/xinitrc"
export TERM="screen-256color"

# vim: set ft=sh:
